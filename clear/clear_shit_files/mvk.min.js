(function (h, k, e, p) {
    var u = e("html"), d = e(h), F = e(k), b = e.fancybox = function () {
        b.open.apply(this, arguments)
    }, Q = navigator.userAgent.match(/msie/i), H = null, B = k.createTouch !== p, P = function (a) {
        return a && a.hasOwnProperty && a instanceof e
    }, A = function (a) {
        return a && "string" === e.type(a)
    }, D = function (a) {
        return A(a) && 0 < a.indexOf("%")
    }, r = function (a, f) {
        var g = parseInt(a, 10) || 0;
        f && D(a) && (g *= b.getViewport()[f] / 100);
        return Math.ceil(g)
    }, L = function (a, b) {
        return r(a, b) + "px"
    };
    e.extend(b, {
        version: "2.1.5",
        defaults: {
            padding: 15,
            margin: 20,
            width: 800,
            height: 600,
            minWidth: 100,
            minHeight: 100,
            maxWidth: 9999,
            maxHeight: 9999,
            pixelRatio: 1,
            autoSize: !0,
            autoHeight: !1,
            autoWidth: !1,
            autoResize: !0,
            autoCenter: !B,
            fitToView: !0,
            aspectRatio: !1,
            topRatio: .5,
            leftRatio: .5,
            scrolling: "auto",
            wrapCSS: "",
            arrows: !0,
            closeBtn: !0,
            closeClick: !1,
            nextClick: !1,
            mouseWheel: !0,
            autoPlay: !1,
            playSpeed: 3E3,
            preload: 3,
            modal: !1,
            loop: !0,
            ajax: {dataType: "html", headers: {"X-fancyBox": !0}},
            iframe: {scrolling: "auto", preload: !0},
            swf: {wmode: "transparent", allowfullscreen: "true", allowscriptaccess: "always"},
            keys: {
                next: {13: "left", 34: "up", 39: "left", 40: "up"},
                prev: {8: "right", 33: "down", 37: "right", 38: "down"},
                close: [27],
                play: [32],
                toggle: [70]
            },
            direction: {next: "left", prev: "right"},
            scrollOutside: !0,
            index: 0,
            type: null,
            href: null,
            content: null,
            title: null,
            tpl: {
                wrap: '<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',
                image: '<img class="fancybox-image" src="{href}" alt="" />',
                iframe: '<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen' + (Q ? ' allowtransparency="true"' : "") + "></iframe>",
                error: '<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',
                closeBtn: '<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>',
                next: '<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',
                prev: '<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'
            },
            openEffect: "fade",
            openSpeed: 250,
            openEasing: "swing",
            openOpacity: !0,
            openMethod: "zoomIn",
            closeEffect: "fade",
            closeSpeed: 250,
            closeEasing: "swing",
            closeOpacity: !0,
            closeMethod: "zoomOut",
            nextEffect: "elastic",
            nextSpeed: 250,
            nextEasing: "swing",
            nextMethod: "changeIn",
            prevEffect: "elastic",
            prevSpeed: 250,
            prevEasing: "swing",
            prevMethod: "changeOut",
            helpers: {overlay: !0, title: !0},
            onCancel: e.noop,
            beforeLoad: e.noop,
            afterLoad: e.noop,
            beforeShow: e.noop,
            afterShow: e.noop,
            beforeChange: e.noop,
            beforeClose: e.noop,
            afterClose: e.noop
        },
        group: {},
        opts: {},
        previous: null,
        coming: null,
        current: null,
        isActive: !1,
        isOpen: !1,
        isOpened: !1,
        wrap: null,
        skin: null,
        outer: null,
        inner: null,
        player: {timer: null, isActive: !1},
        ajaxLoad: null,
        imgPreload: null,
        transitions: {},
        helpers: {},
        open: function (a, f) {
            if (a && (e.isPlainObject(f) || (f = {}), !1 !== b.close(!0))) return e.isArray(a) || (a = P(a) ? e(a).get() : [a]), e.each(a, function (g, c) {
                var d = {}, l, m, n, z, h;
                "object" === e.type(c) && (c.nodeType && (c = e(c)), P(c) ? (d = {
                    href: c.data("fancybox-href") || c.attr("href"),
                    title: c.data("fancybox-title") || c.attr("title"),
                    isDom: !0,
                    element: c
                }, e.metadata && e.extend(!0, d, c.metadata())) : d = c);
                l = f.href || d.href || (A(c) ? c : null);
                m = f.title !== p ? f.title : d.title || "";
                z = (n = f.content || d.content) ? "html" : f.type || d.type;
                !z && d.isDom && (z = c.data("fancybox-type"), z || (z = (z = c.prop("class").match(/fancybox\.(\w+)/)) ? z[1] : null));
                A(l) && (z || (b.isImage(l) ? z = "image" : b.isSWF(l) ? z = "swf" : "#" === l.charAt(0) ? z = "inline" : A(c) && (z = "html", n = c)), "ajax" === z && (h = l.split(/\s+/, 2), l = h.shift(), h = h.shift()));
                n || ("inline" === z ? l ? n = e(A(l) ? l.replace(/.*(?=#[^\s]+$)/, "") : l) : d.isDom && (n = c) : "html" === z ? n = l : !z && !l && d.isDom && (z = "inline", n = c));
                e.extend(d, {href: l, type: z, content: n, title: m, selector: h});
                a[g] = d
            }), b.opts = e.extend(!0, {}, b.defaults, f), f.keys !== p && (b.opts.keys = f.keys ? e.extend({}, b.defaults.keys, f.keys) : !1), b.group = a, b._start(b.opts.index)
        },
        cancel: function () {
            var a = b.coming;
            a && !1 !== b.trigger("onCancel") && (b.hideLoading(), b.ajaxLoad && b.ajaxLoad.abort(), b.ajaxLoad = null, b.imgPreload && (b.imgPreload.onload = b.imgPreload.onerror = null), a.wrap && a.wrap.stop(!0, !0).trigger("onReset").remove(), b.coming = null, b.current || b._afterZoomOut(a))
        },
        close: function (a) {
            b.cancel();
            !1 !== b.trigger("beforeClose") && (b.unbindEvents(), b.isActive && (b.isOpen && !0 !== a ? (b.isOpen = b.isOpened = !1, b.isClosing = !0, e(".fancybox-item, .fancybox-nav").remove(), b.wrap.stop(!0, !0).removeClass("fancybox-opened"), b.transitions[b.current.closeMethod]()) : (e(".fancybox-wrap").stop(!0).trigger("onReset").remove(), b._afterZoomOut())))
        },
        play: function (a) {
            var f = function () {
                clearTimeout(b.player.timer)
            }, g = function () {
                f();
                b.current && b.player.isActive && (b.player.timer = setTimeout(b.next, b.current.playSpeed))
            }, c = function () {
                f();
                F.unbind(".player");
                b.player.isActive = !1;
                b.trigger("onPlayEnd")
            };
            !0 === a || !b.player.isActive && !1 !== a ? b.current && (b.current.loop || b.current.index < b.group.length - 1) && (b.player.isActive = !0, F.bind({
                "onCancel.player beforeClose.player": c,
                "onUpdate.player": g,
                "beforeLoad.player": f
            }), g(), b.trigger("onPlayStart")) : c()
        },
        next: function (a) {
            var f = b.current;
            f && (A(a) || (a = f.direction.next), b.jumpto(f.index + 1, a, "next"))
        },
        prev: function (a) {
            var f = b.current;
            f && (A(a) || (a = f.direction.prev), b.jumpto(f.index - 1, a, "prev"))
        },
        jumpto: function (a, f, g) {
            var c = b.current;
            c && (a = r(a), b.direction = f || c.direction[a >= c.index ? "next" : "prev"], b.router = g || "jumpto", c.loop && (0 > a && (a = c.group.length + a % c.group.length), a %= c.group.length), c.group[a] !== p && (b.cancel(), b._start(a)))
        },
        reposition: function (a, f) {
            var g = b.current, c = g ? g.wrap : null, d;
            c && (d = b._getPosition(f), a && "scroll" === a.type ? (delete d.position, c.stop(!0, !0).animate(d, 200)) : (c.css(d), g.pos = e.extend({}, g.dim, d)))
        },
        update: function (a) {
            var f = a && a.type, g = !f || "orientationchange" === f;
            g && (clearTimeout(H), H = null);
            b.isOpen && !H && (H = setTimeout(function () {
                var c = b.current;
                c && !b.isClosing && (b.wrap.removeClass("fancybox-tmp"), (g || "load" === f || "resize" === f && c.autoResize) && b._setDimension(), "scroll" === f && c.canShrink || b.reposition(a), b.trigger("onUpdate"), H = null)
            }, g && !B ? 0 : 300))
        },
        toggle: function (a) {
            b.isOpen && (b.current.fitToView = "boolean" === e.type(a) ? a : !b.current.fitToView, B && (b.wrap.removeAttr("style").addClass("fancybox-tmp"), b.trigger("onUpdate")), b.update())
        },
        hideLoading: function () {
            F.unbind(".loading");
            e("#fancybox-loading").remove()
        },
        showLoading: function () {
            var a, f;
            b.hideLoading();
            a = e('<div id="fancybox-loading"><div></div></div>').click(b.cancel).appendTo("body");
            F.bind("keydown.loading", function (a) {
                27 === (a.which || a.keyCode) && (a.preventDefault(), b.cancel())
            });
            b.defaults.fixed || (f = b.getViewport(), a.css({
                position: "absolute",
                top: .5 * f.h + f.y,
                left: .5 * f.w + f.x
            }))
        },
        getViewport: function () {
            var a = b.current && b.current.locked || !1, f = {x: d.scrollLeft(), y: d.scrollTop()};
            a ? (f.w = a[0].clientWidth, f.h = a[0].clientHeight) : (f.w = B && h.innerWidth ? h.innerWidth : d.width(), f.h = B && h.innerHeight ? h.innerHeight : d.height());
            return f
        },
        unbindEvents: function () {
            b.wrap && P(b.wrap) && b.wrap.unbind(".fb");
            F.unbind(".fb");
            d.unbind(".fb")
        },
        bindEvents: function () {
            var a = b.current, f;
            a && (d.bind("orientationchange.fb" + (B ? "" : " resize.fb") + (a.autoCenter && !a.locked ? " scroll.fb" : ""), b.update), (f = a.keys) && F.bind("keydown.fb", function (g) {
                var c = g.which || g.keyCode, d = g.target || g.srcElement;
                if (27 === c && b.coming) return !1;
                g.ctrlKey || g.altKey || g.shiftKey || g.metaKey || d && (d.type || e(d).is("[contenteditable]")) || e.each(f, function (f, d) {
                    if (1 < a.group.length && d[c] !== p) return b[f](d[c]), g.preventDefault(), !1;
                    if (-1 < e.inArray(c, d)) return b[f](), g.preventDefault(), !1
                })
            }), e.fn.mousewheel && a.mouseWheel && b.wrap.bind("mousewheel.fb", function (f, c, d, l) {
                for (var m = e(f.target || null), n = !1; m.length && !n && !m.is(".fancybox-skin") && !m.is(".fancybox-wrap");) n = m[0] && !(m[0].style.overflow && "hidden" === m[0].style.overflow) && (m[0].clientWidth && m[0].scrollWidth > m[0].clientWidth || m[0].clientHeight && m[0].scrollHeight > m[0].clientHeight), m = e(m).parent();
                0 !== c && !n && 1 < b.group.length && !a.canShrink && (0 < l || 0 < d ? b.prev(0 < l ? "down" : "left") : (0 > l || 0 > d) && b.next(0 > l ? "up" : "right"), f.preventDefault())
            }))
        },
        trigger: function (a, f) {
            var g, c = f || b.coming || b.current;
            if (c) {
                e.isFunction(c[a]) && (g = c[a].apply(c, Array.prototype.slice.call(arguments, 1)));
                if (!1 === g) return !1;
                c.helpers && e.each(c.helpers, function (f, g) {
                    if (g && b.helpers[f] && e.isFunction(b.helpers[f][a])) b.helpers[f][a](e.extend(!0, {}, b.helpers[f].defaults, g), c)
                });
                F.trigger(a)
            }
        },
        isImage: function (a) {
            return A(a) && a.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)
        },
        isSWF: function (a) {
            return A(a) && a.match(/\.(swf)((\?|#).*)?$/i)
        },
        _start: function (a) {
            var f = {}, g, c;
            a = r(a);
            g = b.group[a] || null;
            if (!g) return !1;
            f = e.extend(!0, {}, b.opts, g);
            g = f.margin;
            c = f.padding;
            "number" === e.type(g) && (f.margin = [g, g, g, g]);
            "number" === e.type(c) && (f.padding = [c, c, c, c]);
            f.modal && e.extend(!0, f, {
                closeBtn: !1,
                closeClick: !1,
                nextClick: !1,
                arrows: !1,
                mouseWheel: !1,
                keys: null,
                helpers: {overlay: {closeClick: !1}}
            });
            f.autoSize && (f.autoWidth = f.autoHeight = !0);
            "auto" === f.width && (f.autoWidth = !0);
            "auto" === f.height && (f.autoHeight = !0);
            f.group = b.group;
            f.index = a;
            b.coming = f;
            if (!1 === b.trigger("beforeLoad")) b.coming = null; else {
                c = f.type;
                g = f.href;
                if (!c) return b.coming = null, b.current && b.router && "jumpto" !== b.router ? (b.current.index = a, b[b.router](b.direction)) : !1;
                b.isActive = !0;
                if ("image" === c || "swf" === c) f.autoHeight = f.autoWidth = !1, f.scrolling = "visible";
                "image" === c && (f.aspectRatio = !0);
                "iframe" === c && B && (f.scrolling = "scroll");
                f.wrap = e(f.tpl.wrap).addClass("fancybox-" + (B ? "mobile" : "desktop") + " fancybox-type-" + c + " fancybox-tmp " + f.wrapCSS).appendTo(f.parent || "body");
                e.extend(f, {
                    skin: e(".fancybox-skin", f.wrap),
                    outer: e(".fancybox-outer", f.wrap),
                    inner: e(".fancybox-inner", f.wrap)
                });
                e.each(["Top", "Right", "Bottom", "Left"], function (a, b) {
                    f.skin.css("padding" + b, L(f.padding[a]))
                });
                b.trigger("onReady");
                if ("inline" === c || "html" === c) {
                    if (!f.content || !f.content.length) return b._error("content")
                } else if (!g) return b._error("href");
                "image" === c ? b._loadImage() : "ajax" === c ? b._loadAjax() : "iframe" === c ? b._loadIframe() : b._afterLoad()
            }
        },
        _error: function (a) {
            e.extend(b.coming, {
                type: "html",
                autoWidth: !0,
                autoHeight: !0,
                minWidth: 0,
                minHeight: 0,
                scrolling: "no",
                hasError: a,
                content: b.coming.tpl.error
            });
            b._afterLoad()
        },
        _loadImage: function () {
            var a = b.imgPreload = new Image;
            a.onload = function () {
                this.onload = this.onerror = null;
                b.coming.width = this.width / b.opts.pixelRatio;
                b.coming.height = this.height / b.opts.pixelRatio;
                b._afterLoad()
            };
            a.onerror = function () {
                this.onload = this.onerror = null;
                b._error("image")
            };
            a.src = b.coming.href;
            !0 !== a.complete && b.showLoading()
        },
        _loadAjax: function () {
            var a = b.coming;
            b.showLoading();
            b.ajaxLoad = e.ajax(e.extend({}, a.ajax, {
                url: a.href, error: function (a, g) {
                    b.coming && "abort" !== g ? b._error("ajax", a) : b.hideLoading()
                }, success: function (f, g) {
                    "success" === g && (a.content = f, b._afterLoad())
                }
            }))
        },
        _loadIframe: function () {
            var a = b.coming,
                f = e(a.tpl.iframe.replace(/\{rnd\}/g, (new Date).getTime())).attr("scrolling", B ? "auto" : a.iframe.scrolling).attr("src", a.href);
            e(a.wrap).bind("onReset", function () {
                try {
                    e(this).find("iframe").hide().attr("src", "//about:blank").end().empty()
                } catch (a) {
                }
            });
            a.iframe.preload && (b.showLoading(), f.one("load", function () {
                e(this).data("ready", 1);
                B || e(this).bind("load.fb", b.update);
                e(this).parents(".fancybox-wrap").width("100%").removeClass("fancybox-tmp").show();
                b._afterLoad()
            }));
            a.content = f.appendTo(a.inner);
            a.iframe.preload || b._afterLoad()
        },
        _preloadImages: function () {
            var a = b.group, f = b.current, g = a.length, c = f.preload ? Math.min(f.preload, g - 1) : 0, d, e;
            for (e = 1; e <= c; e += 1) d = a[(f.index + e) % g], "image" === d.type && d.href && ((new Image).src = d.href)
        },
        _afterLoad: function () {
            var a = b.coming, f = b.current, g, c, d, l, m;
            b.hideLoading();
            if (a && !1 !== b.isActive) if (!1 === b.trigger("afterLoad", a, f)) a.wrap.stop(!0).trigger("onReset").remove(), b.coming = null; else {
                f && (b.trigger("beforeChange", f), f.wrap.stop(!0).removeClass("fancybox-opened").find(".fancybox-item, .fancybox-nav").remove());
                b.unbindEvents();
                g = a.content;
                c = a.type;
                d = a.scrolling;
                e.extend(b, {wrap: a.wrap, skin: a.skin, outer: a.outer, inner: a.inner, current: a, previous: f});
                l = a.href;
                switch (c) {
                    case "inline":
                    case "ajax":
                    case "html":
                        a.selector ? g = e("<div>").html(g).find(a.selector) : P(g) && (g.data("fancybox-placeholder") || g.data("fancybox-placeholder", e('<div class="fancybox-placeholder"></div>').insertAfter(g).hide()), g = g.show().detach(), a.wrap.bind("onReset", function () {
                            e(this).find(g).length && g.hide().replaceAll(g.data("fancybox-placeholder")).data("fancybox-placeholder", !1)
                        }));
                        break;
                    case "image":
                        g = a.tpl.image.replace("{href}", l);
                        break;
                    case "swf":
                        g = '<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="' + l + '"></param>', m = "", e.each(a.swf, function (a, b) {
                            g += '<param name="' + a + '" value="' + b + '"></param>';
                            m += " " + a + '="' + b + '"'
                        }), g += '<embed src="' + l + '" type="application/x-shockwave-flash" width="100%" height="100%"' + m + "></embed></object>"
                }
                P(g) && g.parent().is(a.inner) || a.inner.append(g);
                b.trigger("beforeShow");
                a.inner.css("overflow", "yes" === d ? "scroll" : "no" === d ? "hidden" : d);
                b._setDimension();
                b.reposition();
                b.isOpen = !1;
                b.coming = null;
                b.bindEvents();
                if (b.isOpened) {
                    if (f.prevMethod) b.transitions[f.prevMethod]()
                } else e(".fancybox-wrap").not(a.wrap).stop(!0).trigger("onReset").remove();
                b.transitions[b.isOpened ? a.nextMethod : a.openMethod]();
                b._preloadImages()
            }
        },
        _setDimension: function () {
            var a = b.getViewport(), f = 0, g = !1, c = !1, g = b.wrap, d = b.skin, l = b.inner, m = b.current,
                c = m.width, n = m.height, h = m.minWidth, k = m.minHeight, p = m.maxWidth, u = m.maxHeight,
                F = m.scrolling, B = m.scrollOutside ? m.scrollbarWidth : 0, I = m.margin, J = r(I[1] + I[3]),
                A = r(I[0] + I[2]), H, G, y, x, t, M, N, C, K;
            g.add(d).add(l).width("auto").height("auto").removeClass("fancybox-tmp");
            I = r(d.outerWidth(!0) - d.width());
            H = r(d.outerHeight(!0) - d.height());
            G = J + I;
            y = A + H;
            x = D(c) ? (a.w - G) * r(c) / 100 : c;
            t = D(n) ? (a.h - y) * r(n) / 100 : n;
            if ("iframe" === m.type) {
                if (K = m.content, m.autoHeight && 1 === K.data("ready")) try {
                    K[0].contentWindow.document.location && (l.width(x).height(9999), M = K.contents().find("body"), B && M.css("overflow-x", "hidden"), t = M.outerHeight(!0))
                } catch (O) {
                }
            } else if (m.autoWidth || m.autoHeight) l.addClass("fancybox-tmp"), m.autoWidth || l.width(x), m.autoHeight || l.height(t), m.autoWidth && (x = l.width()), m.autoHeight && (t = l.height()), l.removeClass("fancybox-tmp");
            c = r(x);
            n = r(t);
            C = x / t;
            h = r(D(h) ? r(h, "w") - G : h);
            p = r(D(p) ? r(p, "w") - G : p);
            k = r(D(k) ? r(k, "h") - y : k);
            u = r(D(u) ? r(u, "h") - y : u);
            M = p;
            N = u;
            m.fitToView && (p = Math.min(a.w - G, p), u = Math.min(a.h - y, u));
            G = a.w - J;
            A = a.h - A;
            m.aspectRatio ? (c > p && (c = p, n = r(c / C)), n > u && (n = u, c = r(n * C)), c < h && (c = h, n = r(c / C)), n < k && (n = k, c = r(n * C))) : (c = Math.max(h, Math.min(c, p)), m.autoHeight && "iframe" !== m.type && (l.width(c), n = l.height()), n = Math.max(k, Math.min(n, u)));
            if (m.fitToView) if (l.width(c).height(n), g.width(c + I), a = g.width(), J = g.height(), m.aspectRatio) for (; (a > G || J > A) && c > h && n > k && !(19 < f++);) n = Math.max(k, Math.min(u, n - 10)), c = r(n * C), c < h && (c = h, n = r(c / C)), c > p && (c = p, n = r(c / C)), l.width(c).height(n), g.width(c + I), a = g.width(), J = g.height(); else c = Math.max(h, Math.min(c, c - (a - G))), n = Math.max(k, Math.min(n, n - (J - A)));
            B && "auto" === F && n < t && c + I + B < G && (c += B);
            l.width(c).height(n);
            g.width(c + I);
            a = g.width();
            J = g.height();
            g = (a > G || J > A) && c > h && n > k;
            c = m.aspectRatio ? c < M && n < N && c < x && n < t : (c < M || n < N) && (c < x || n < t);
            e.extend(m, {
                dim: {width: L(a), height: L(J)},
                origWidth: x,
                origHeight: t,
                canShrink: g,
                canExpand: c,
                wPadding: I,
                hPadding: H,
                wrapSpace: J - d.outerHeight(!0),
                skinSpace: d.height() - n
            });
            !K && m.autoHeight && n > k && n < u && !c && l.height("auto")
        },
        _getPosition: function (a) {
            var f = b.current, d = b.getViewport(), c = f.margin, e = b.wrap.width() + c[1] + c[3],
                l = b.wrap.height() + c[0] + c[2], c = {position: "absolute", top: c[0], left: c[3]};
            f.autoCenter && f.fixed && !a && l <= d.h && e <= d.w ? c.position = "fixed" : f.locked || (c.top += d.y, c.left += d.x);
            c.top = L(Math.max(c.top, c.top + (d.h - l) * f.topRatio));
            c.left = L(Math.max(c.left, c.left + (d.w - e) * f.leftRatio));
            return c
        },
        _afterZoomIn: function () {
            var a = b.current;
            a && (b.isOpen = b.isOpened = !0, b.wrap.css("overflow", "visible").addClass("fancybox-opened"), b.update(), (a.closeClick || a.nextClick && 1 < b.group.length) && b.inner.css("cursor", "pointer").bind("click.fb", function (f) {
                e(f.target).is("a") || e(f.target).parent().is("a") || (f.preventDefault(), b[a.closeClick ? "close" : "next"]())
            }), a.closeBtn && e(a.tpl.closeBtn).appendTo(b.skin).bind("click.fb", function (a) {
                a.preventDefault();
                b.close()
            }), a.arrows && 1 < b.group.length && ((a.loop || 0 < a.index) && e(a.tpl.prev).appendTo(b.outer).bind("click.fb", b.prev), (a.loop || a.index < b.group.length - 1) && e(a.tpl.next).appendTo(b.outer).bind("click.fb", b.next)), b.trigger("afterShow"), a.loop || a.index !== a.group.length - 1 ? b.opts.autoPlay && !b.player.isActive && (b.opts.autoPlay = !1, b.play()) : b.play(!1))
        },
        _afterZoomOut: function (a) {
            a = a || b.current;
            e(".fancybox-wrap").trigger("onReset").remove();
            e.extend(b, {
                group: {},
                opts: {},
                router: !1,
                current: null,
                isActive: !1,
                isOpened: !1,
                isOpen: !1,
                isClosing: !1,
                wrap: null,
                skin: null,
                outer: null,
                inner: null
            });
            b.trigger("afterClose", a)
        }
    });
    b.transitions = {
        getOrigPosition: function () {
            var a = b.current, f = a.element, d = a.orig, c = {}, e = 50, l = 50, m = a.hPadding, h = a.wPadding,
                k = b.getViewport();
            !d && a.isDom && f.is(":visible") && (d = f.find("img:first"), d.length || (d = f));
            P(d) ? (c = d.offset(), d.is("img") && (e = d.outerWidth(), l = d.outerHeight())) : (c.top = k.y + (k.h - l) * a.topRatio, c.left = k.x + (k.w - e) * a.leftRatio);
            if ("fixed" === b.wrap.css("position") || a.locked) c.top -= k.y, c.left -= k.x;
            return {
                top: L(c.top - m * a.topRatio),
                left: L(c.left - h * a.leftRatio),
                width: L(e + h),
                height: L(l + m)
            }
        }, step: function (a, f) {
            var d, c, e = f.prop;
            c = b.current;
            var h = c.wrapSpace, m = c.skinSpace;
            if ("width" === e || "height" === e) d = f.end === f.start ? 1 : (a - f.start) / (f.end - f.start), b.isClosing && (d = 1 - d), c = "width" === e ? c.wPadding : c.hPadding, c = a - c, b.skin[e](r("width" === e ? c : c - h * d)), b.inner[e](r("width" === e ? c : c - h * d - m * d))
        }, zoomIn: function () {
            var a = b.current, f = a.pos, d = a.openEffect, c = "elastic" === d, h = e.extend({opacity: 1}, f);
            delete h.position;
            c ? (f = this.getOrigPosition(), a.openOpacity && (f.opacity = .1)) : "fade" === d && (f.opacity = .1);
            b.wrap.css(f).animate(h, {
                duration: "none" === d ? 0 : a.openSpeed,
                easing: a.openEasing,
                step: c ? this.step : null,
                complete: b._afterZoomIn
            })
        }, zoomOut: function () {
            var a = b.current, f = a.closeEffect, d = "elastic" === f, c = {opacity: .1};
            d && (c = this.getOrigPosition(), a.closeOpacity && (c.opacity = .1));
            b.wrap.animate(c, {
                duration: "none" === f ? 0 : a.closeSpeed,
                easing: a.closeEasing,
                step: d ? this.step : null,
                complete: b._afterZoomOut
            })
        }, changeIn: function () {
            var a = b.current, d = a.nextEffect, e = a.pos, c = {opacity: 1}, h = b.direction, l;
            e.opacity = .1;
            "elastic" === d && (l = "down" === h || "up" === h ? "top" : "left", "down" === h || "right" === h ? (e[l] = L(r(e[l]) - 200), c[l] = "+=200px") : (e[l] = L(r(e[l]) + 200), c[l] = "-=200px"));
            "none" === d ? b._afterZoomIn() : b.wrap.css(e).animate(c, {
                duration: a.nextSpeed,
                easing: a.nextEasing,
                complete: b._afterZoomIn
            })
        }, changeOut: function () {
            var a = b.previous, d = a.prevEffect, g = {opacity: .1}, c = b.direction;
            "elastic" === d && (g["down" === c || "up" === c ? "top" : "left"] = ("up" === c || "left" === c ? "-" : "+") + "=200px");
            a.wrap.animate(g, {
                duration: "none" === d ? 0 : a.prevSpeed, easing: a.prevEasing, complete: function () {
                    e(this).trigger("onReset").remove()
                }
            })
        }
    };
    b.helpers.overlay = {
        defaults: {closeClick: !0, speedOut: 200, showEarly: !0, css: {}, locked: !B, fixed: !0},
        overlay: null,
        fixed: !1,
        el: e("html"),
        create: function (a) {
            a = e.extend({}, this.defaults, a);
            this.overlay && this.close();
            this.overlay = e('<div class="fancybox-overlay"></div>').appendTo(b.coming ? b.coming.parent : a.parent);
            this.fixed = !1;
            a.fixed && b.defaults.fixed && (this.overlay.addClass("fancybox-overlay-fixed"), this.fixed = !0)
        },
        open: function (a) {
            var f = this;
            a = e.extend({}, this.defaults, a);
            this.overlay ? this.overlay.unbind(".overlay").width("auto").height("auto") : this.create(a);
            this.fixed || (d.bind("resize.overlay", e.proxy(this.update, this)), this.update());
            a.closeClick && this.overlay.bind("click.overlay", function (a) {
                if (e(a.target).hasClass("fancybox-overlay")) return b.isActive ? b.close() : f.close(), !1
            });
            this.overlay.css(a.css).show()
        },
        close: function () {
            var a, b;
            d.unbind("resize.overlay");
            this.el.hasClass("fancybox-lock") && (e(".fancybox-margin").removeClass("fancybox-margin"), a = d.scrollTop(), b = d.scrollLeft(), this.el.removeClass("fancybox-lock"), d.scrollTop(a).scrollLeft(b));
            e(".fancybox-overlay").remove().hide();
            e.extend(this, {overlay: null, fixed: !1})
        },
        update: function () {
            var a = "100%", b;
            this.overlay.width(a).height("100%");
            Q ? (b = Math.max(k.documentElement.offsetWidth, k.body.offsetWidth), F.width() > b && (a = F.width())) : F.width() > d.width() && (a = F.width());
            this.overlay.width(a).height(F.height())
        },
        onReady: function (a, b) {
            var g = this.overlay;
            e(".fancybox-overlay").stop(!0, !0);
            g || this.create(a);
            a.locked && this.fixed && b.fixed && (g || (this.margin = F.height() > d.height() ? e("html").css("margin-right").replace("px", "") : !1), b.locked = this.overlay.append(b.wrap), b.fixed = !1);
            !0 === a.showEarly && this.beforeShow.apply(this, arguments)
        },
        beforeShow: function (a, b) {
            var g, c;
            b.locked && (!1 !== this.margin && (e("*").filter(function () {
                return "fixed" === e(this).css("position") && !e(this).hasClass("fancybox-overlay") && !e(this).hasClass("fancybox-wrap")
            }).addClass("fancybox-margin"), this.el.addClass("fancybox-margin")), g = d.scrollTop(), c = d.scrollLeft(), this.el.addClass("fancybox-lock"), d.scrollTop(g).scrollLeft(c));
            this.open(a)
        },
        onUpdate: function () {
            this.fixed || this.update()
        },
        afterClose: function (a) {
            this.overlay && !b.coming && this.overlay.fadeOut(a.speedOut, e.proxy(this.close, this))
        }
    };
    b.helpers.title = {
        defaults: {type: "float", position: "bottom"}, beforeShow: function (a) {
            var d = b.current, g = d.title, c = a.type;
            e.isFunction(g) && (g = g.call(d.element, d));
            if (A(g) && "" !== e.trim(g)) {
                d = e('<div class="fancybox-title fancybox-title-' + c + '-wrap">' + g + "</div>");
                switch (c) {
                    case "inside":
                        c = b.skin;
                        break;
                    case "outside":
                        c = b.wrap;
                        break;
                    case "over":
                        c = b.inner;
                        break;
                    default:
                        c = b.skin, d.appendTo("body"), Q && d.width(d.width()), d.wrapInner('<span class="child"></span>'), b.current.margin[2] += Math.abs(r(d.css("margin-bottom")))
                }
                d["top" === a.position ? "prependTo" : "appendTo"](c)
            }
        }
    };
    e.fn.fancybox = function (a) {
        var d, g = e(this), c = this.selector || "", h = function (h) {
            var m = e(this).blur(), k = d, p, u;
            h.ctrlKey || h.altKey || h.shiftKey || h.metaKey || m.is(".fancybox-wrap") || (p = a.groupAttr || "data-fancybox-group", u = m.attr(p), u || (p = "rel", u = m.get(0)[p]), u && "" !== u && "nofollow" !== u && (m = c.length ? e(c) : g, m = m.filter("[" + p + '="' + u + '"]'), k = m.index(this)), a.index = k, !1 === b.open(m, a) || h.preventDefault())
        };
        a = a || {};
        d = a.index || 0;
        c && !1 !== a.live ? F.undelegate(c, "click.fb-start").delegate(c + ":not('.fancybox-item, .fancybox-nav')", "click.fb-start", h) : g.unbind("click.fb-start").bind("click.fb-start", h);
        this.filter("[data-fancybox-start=1]").trigger("click");
        return this
    };
    F.ready(function () {
        var a, d;
        e.scrollbarWidth === p && (e.scrollbarWidth = function () {
            var a = e('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),
                b = a.children(), b = b.innerWidth() - b.height(99).innerWidth();
            a.remove();
            return b
        });
        if (e.support.fixedPosition === p) {
            a = e.support;
            d = e('<div style="position:fixed;top:20px;"></div>').appendTo("body");
            var g = 20 === d[0].offsetTop || 15 === d[0].offsetTop;
            d.remove();
            a.fixedPosition = g
        }
        e.extend(b.defaults, {scrollbarWidth: e.scrollbarWidth(), fixed: e.support.fixedPosition, parent: e("body")});
        a = e(h).width();
        u.addClass("fancybox-lock-test");
        d = e(h).width();
        u.removeClass("fancybox-lock-test");
        e("<style type='text/css'>.fancybox-margin{margin-right:" + (d - a) + "px;}</style>").appendTo("head")
    })
})(window, document, jQuery);
(function (h) {
    "function" === typeof define && define.amd && define.amd.jQuery ? define(["jquery"], h) : h(jQuery)
})(function (h) {
    function k(k) {
        !k || void 0 !== k.allowPageScroll || void 0 === k.swipe && void 0 === k.swipeStatus || (k.allowPageScroll = "none");
        void 0 !== k.click && void 0 === k.tap && (k.tap = k.click);
        k || (k = {});
        k = h.extend({}, h.fn.swipe.defaults, k);
        return this.each(function () {
            var d = h(this), p = d.data("TouchSwipe");
            p || (p = new e(this, k), d.data("TouchSwipe", p))
        })
    }

    function e(e, d) {
        function k(a) {
            if (!0 !== q.data("TouchSwipe_intouch") && !(0 < h(a.target).closest(d.excludedElements, q).length)) {
                var b = a.originalEvent ? a.originalEvent : a, c, e = p ? b.touches[0] : b;
                v = "start";
                p ? w = b.touches.length : a.preventDefault();
                y = 0;
                O = x = null;
                N = M = t = 0;
                C = 1;
                K = 0;
                a = [];
                for (var f = 0; 5 >= f; f++) a.push({start: {x: 0, y: 0}, end: {x: 0, y: 0}, identifier: 0});
                E = a;
                a = {};
                a.left = V("left");
                a.right = V("right");
                a.up = V("up");
                a.down = V("down");
                W = a;
                X = T = 0;
                if (!p || w === d.fingers || "all" === d.fingers || g()) {
                    if (z(0, e), Y = R(), 2 == w && (z(1, b.touches[1]), M = N = aa(E[0].start, E[1].start)), d.swipeStatus || d.pinchStatus) c = D(b, v)
                } else c = !1;
                if (!1 === c) return v = "cancel", D(b, v), c;
                n(!0);
                return null
            }
        }

        function b(a) {
            var b, c, e, f = a.originalEvent ? a.originalEvent : a;
            if ("end" !== v && "cancel" !== v && !m()) {
                var k, l = ea(p ? f.touches[0] : f);
                U = R();
                p && (w = f.touches.length);
                v = "move";
                2 == w && (0 == M ? (z(1, f.touches[1]), M = N = aa(E[0].start, E[1].start)) : (ea(f.touches[1]), N = aa(E[0].end, E[1].end), O = 1 > C ? "out" : "in"), C = (N / M * 1).toFixed(2), K = Math.abs(M - N));
                if (w === d.fingers || "all" === d.fingers || !p || g()) {
                    b = l.start;
                    c = l.end;
                    b = Math.atan2(c.y - b.y, b.x - c.x);
                    b = Math.round(180 * b / Math.PI);
                    0 > b && (b = 360 - Math.abs(b));
                    b = x = 45 >= b && 0 <= b ? "left" : 360 >= b && 315 <= b ? "left" : 135 <= b && 225 >= b ? "right" : 45 < b && 135 > b ? "down" : "up";
                    if ("none" === d.allowPageScroll || g()) a.preventDefault(); else switch (c = "auto" === d.allowPageScroll, b) {
                        case "left":
                            (d.swipeLeft && c || !c && "horizontal" != d.allowPageScroll) && a.preventDefault();
                            break;
                        case "right":
                            (d.swipeRight && c || !c && "horizontal" != d.allowPageScroll) && a.preventDefault();
                            break;
                        case "up":
                            (d.swipeUp && c || !c && "vertical" != d.allowPageScroll) && a.preventDefault();
                            break;
                        case "down":
                            (d.swipeDown && c || !c && "vertical" != d.allowPageScroll) && a.preventDefault()
                    }
                    a = l.start;
                    b = l.end;
                    y = Math.round(Math.sqrt(Math.pow(b.x - a.x, 2) + Math.pow(b.y - a.y, 2)));
                    t = U - Y;
                    a = x;
                    b = y;
                    b = Math.max(b, fa(a));
                    W[a].distance = b;
                    if (d.swipeStatus || d.pinchStatus) k = D(f, v);
                    if (!d.triggerOnTouchEnd || d.triggerOnTouchLeave) {
                        a = !0;
                        if (d.triggerOnTouchLeave) {
                            e = h(this);
                            var n = e.offset();
                            a = n.left;
                            b = n.left + e.outerWidth();
                            c = n.top;
                            e = n.top + e.outerHeight();
                            l = l.end;
                            a = l.x > a && l.x < b && l.y > c && l.y < e
                        }
                        !d.triggerOnTouchEnd && a ? v = A("move") : d.triggerOnTouchLeave && !a && (v = A("end"));
                        "cancel" != v && "end" != v || D(f, v)
                    }
                } else v = "cancel", D(f, v);
                !1 === k && (v = "cancel", D(f, v))
            }
        }

        function Q(b) {
            var c = b.originalEvent;
            if (p && 0 < c.touches.length) return T = R(), X = event.touches.length + 1, !0;
            m() && (w = X);
            b.preventDefault();
            U = R();
            t = U - Y;
            a() ? (v = "cancel", D(c, v)) : d.triggerOnTouchEnd || 0 == d.triggerOnTouchEnd && "move" === v ? (v = "end", D(c, v)) : !d.triggerOnTouchEnd && d.tap ? (v = "end", r(c, v, "tap")) : "move" === v && (v = "cancel", D(c, v));
            n(!1);
            return null
        }

        function H() {
            N = M = Y = U = w = 0;
            C = 1;
            X = T = 0;
            n(!1)
        }

        function B(a) {
            a = a.originalEvent;
            d.triggerOnTouchLeave && (v = A("end"), D(a, v))
        }

        function P() {
            q.unbind(J, k);
            q.unbind("touchcancel", H);
            q.unbind(ba, b);
            q.unbind(ca, Q);
            G && q.unbind(G, B);
            n(!1)
        }

        function A(b) {
            var c = b, e = d.maxTimeThreshold ? t >= d.maxTimeThreshold ? !1 : !0 : !0, f = L(), g = a();
            !e || g ? c = "cancel" : !f || "move" != b || d.triggerOnTouchEnd && !d.triggerOnTouchLeave ? !f && "end" == b && d.triggerOnTouchLeave && (c = "cancel") : c = "end";
            return c
        }

        function D(a, b) {
            var e = void 0;
            c() && da() || da() ? e = r(a, b, "swipe") : (f() && g() || g()) && !1 !== e && (e = r(a, b, "pinch"));
            l() && d.doubleTap && !1 !== e ? e = r(a, b, "doubletap") : t > d.longTapThreshold && 10 > y && d.longTap && !1 !== e ? e = r(a, b, "longtap") : !(1 !== w && p || !isNaN(y) && 0 !== y) && d.tap && !1 !== e && (e = r(a, b, "tap"));
            "cancel" === b && H(a);
            "end" === b && (p ? 0 == a.touches.length && H(a) : H(a));
            return e
        }

        function r(a, b, e) {
            var g = void 0;
            if ("swipe" == e) {
                q.trigger("swipeStatus", [b, x || null, y || 0, t || 0, w]);
                if (d.swipeStatus && (g = d.swipeStatus.call(q, a, b, x || null, y || 0, t || 0, w), !1 === g)) return !1;
                if ("end" == b && c()) {
                    q.trigger("swipe", [x, y, t, w]);
                    if (d.swipe && (g = d.swipe.call(q, a, x, y, t, w), !1 === g)) return !1;
                    switch (x) {
                        case "left":
                            q.trigger("swipeLeft", [x, y, t, w]);
                            d.swipeLeft && (g = d.swipeLeft.call(q, a, x, y, t, w));
                            break;
                        case "right":
                            q.trigger("swipeRight", [x, y, t, w]);
                            d.swipeRight && (g = d.swipeRight.call(q, a, x, y, t, w));
                            break;
                        case "up":
                            q.trigger("swipeUp", [x, y, t, w]);
                            d.swipeUp && (g = d.swipeUp.call(q, a, x, y, t, w));
                            break;
                        case "down":
                            q.trigger("swipeDown", [x, y, t, w]), d.swipeDown && (g = d.swipeDown.call(q, a, x, y, t, w))
                    }
                }
            }
            if ("pinch" == e) {
                q.trigger("pinchStatus", [b, O || null, K || 0, t || 0, w, C]);
                if (d.pinchStatus && (g = d.pinchStatus.call(q, a, b, O || null, K || 0, t || 0, w, C), !1 === g)) return !1;
                if ("end" == b && f()) switch (O) {
                    case "in":
                        q.trigger("pinchIn", [O || null, K || 0, t || 0, w, C]);
                        d.pinchIn && (g = d.pinchIn.call(q, a, O || null, K || 0, t || 0, w, C));
                        break;
                    case "out":
                        q.trigger("pinchOut", [O || null, K || 0, t || 0, w, C]), d.pinchOut && (g = d.pinchOut.call(q, a, O || null, K || 0, t || 0, w, C))
                }
            }
            if ("tap" == e) {
                if ("cancel" === b || "end" === b) clearTimeout(Z), d.doubleTap && !l() ? (S = R(), Z = setTimeout(h.proxy(function () {
                    S = null;
                    q.trigger("tap", [a.target]);
                    d.tap && (g = d.tap.call(q, a, a.target))
                }, this), d.doubleTapThreshold)) : (S = null, q.trigger("tap", [a.target]), d.tap && (g = d.tap.call(q, a, a.target)))
            } else if ("doubletap" == e) {
                if ("cancel" === b || "end" === b) clearTimeout(Z), S = null, q.trigger("doubletap", [a.target]), d.doubleTap && (g = d.doubleTap.call(q, a, a.target))
            } else "longtap" != e || "cancel" !== b && "end" !== b || (clearTimeout(Z), S = null, q.trigger("longtap", [a.target]), d.longTap && (g = d.longTap.call(q, a, a.target)));
            return g
        }

        function L() {
            var a = !0;
            null !== d.threshold && (a = y >= d.threshold);
            return a
        }

        function a() {
            var a = !1;
            null !== d.cancelThreshold && null !== x && (a = fa(x) - y >= d.cancelThreshold);
            return a
        }

        function f() {
            var a = w === d.fingers || "all" === d.fingers || !p, b = 0 !== E[0].end.x, c;
            c = null !== d.pinchThreshold ? K >= d.pinchThreshold : !0;
            return a && b && c
        }

        function g() {
            return !!(d.pinchStatus || d.pinchIn || d.pinchOut)
        }

        function c() {
            var b = d.maxTimeThreshold ? t >= d.maxTimeThreshold ? !1 : !0 : !0, c = L(),
                e = w === d.fingers || "all" === d.fingers || !p, f = 0 !== E[0].end.x;
            return !a() && f && e && c && b
        }

        function da() {
            return !!(d.swipe || d.swipeStatus || d.swipeLeft || d.swipeRight || d.swipeUp || d.swipeDown)
        }

        function l() {
            if (null == S) return !1;
            var a = R();
            return !!d.doubleTap && a - S <= d.doubleTapThreshold
        }

        function m() {
            var a = !1;
            T && R() - T <= d.fingerReleaseThreshold && (a = !0);
            return a
        }

        function n(a) {
            !0 === a ? (q.bind(ba, b), q.bind(ca, Q), G && q.bind(G, B)) : (q.unbind(ba, b, !1), q.unbind(ca, Q, !1), G && q.unbind(G, B, !1));
            q.data("TouchSwipe_intouch", !0 === a)
        }

        function z(a, b) {
            E[a].identifier = void 0 !== b.identifier ? b.identifier : 0;
            E[a].start.x = E[a].end.x = b.pageX || b.clientX;
            E[a].start.y = E[a].end.y = b.pageY || b.clientY;
            return E[a]
        }

        function ea(a) {
            var b = void 0 !== a.identifier ? a.identifier : 0;
            a:{
                for (var c = 0; c < E.length; c++) if (E[c].identifier == b) {
                    b = E[c];
                    break a
                }
                b = void 0
            }
            b.end.x = a.pageX || a.clientX;
            b.end.y = a.pageY || a.clientY;
            return b
        }

        function fa(a) {
            if (W[a]) return W[a].distance
        }

        function V(a) {
            return {direction: a, distance: 0}
        }

        function aa(a, b) {
            var c = Math.abs(a.x - b.x), d = Math.abs(a.y - b.y);
            return Math.round(Math.sqrt(c * c + d * d))
        }

        function R() {
            return (new Date).getTime()
        }

        var I = p || !d.fallbackToMouseEvents, J = I ? "touchstart" : "mousedown", ba = I ? "touchmove" : "mousemove",
            ca = I ? "touchend" : "mouseup", G = I ? null : "mouseleave", y = 0, x = null, t = 0, M = 0, N = 0, C = 1,
            K = 0, O = 0, W = null, q = h(e), v = "start", w = 0, E = null, Y = 0, U = 0, T = 0, X = 0, S = 0, Z = null;
        try {
            q.bind(J, k), q.bind("touchcancel", H)
        } catch (ga) {
            h.error("events not supported " + J + ",touchcancel on jQuery.swipe")
        }
        this.enable = function () {
            q.bind(J, k);
            q.bind("touchcancel", H);
            return q
        };
        this.disable = function () {
            P();
            return q
        };
        this.destroy = function () {
            P();
            q.data("TouchSwipe", null);
            return q
        };
        this.option = function (a, b) {
            if (void 0 !== d[a]) {
                if (void 0 === b) return d[a];
                d[a] = b
            } else h.error("Option " + a + " does not exist on jQuery.swipe.options");
            return null
        }
    }

    var p = "ontouchstart" in window;
    h.fn.swipe = function (e) {
        var d = h(this), p = d.data("TouchSwipe");
        if (p && "string" === typeof e) {
            if (p[e]) return p[e].apply(this, Array.prototype.slice.call(arguments, 1));
            h.error("Method " + e + " does not exist on jQuery.swipe")
        } else if (!(p || "object" !== typeof e && e)) return k.apply(this, arguments);
        return d
    };
    h.fn.swipe.defaults = {
        fingers: 1,
        threshold: 75,
        cancelThreshold: null,
        pinchThreshold: 20,
        maxTimeThreshold: null,
        fingerReleaseThreshold: 250,
        longTapThreshold: 500,
        doubleTapThreshold: 200,
        swipe: null,
        swipeLeft: null,
        swipeRight: null,
        swipeUp: null,
        swipeDown: null,
        swipeStatus: null,
        pinchIn: null,
        pinchOut: null,
        pinchStatus: null,
        click: null,
        tap: null,
        doubleTap: null,
        longTap: null,
        triggerOnTouchEnd: !0,
        triggerOnTouchLeave: !1,
        allowPageScroll: "auto",
        fallbackToMouseEvents: !0,
        excludedElements: "label, button, input, select, textarea, a, .noSwipe"
    };
    h.fn.swipe.phases = {PHASE_START: "start", PHASE_MOVE: "move", PHASE_END: "end", PHASE_CANCEL: "cancel"};
    h.fn.swipe.directions = {LEFT: "left", RIGHT: "right", UP: "up", DOWN: "down", IN: "in", OUT: "out"};
    h.fn.swipe.pageScroll = {NONE: "none", HORIZONTAL: "horizontal", VERTICAL: "vertical", AUTO: "auto"};
    h.fn.swipe.fingers = {ONE: 1, TWO: 2, THREE: 3, ALL: "all"}
});
jQuery.easing.jswing = jQuery.easing.swing;
jQuery.extend(jQuery.easing, {
    def: "easeOutQuart", easeInQuart: function (h, k, e, p, u) {
        return p * (k /= u) * k * k * k + e
    }, easeOutQuart: function (h, k, e, p, u) {
        return -p * ((k = k / u - 1) * k * k * k - 1) + e
    }, easeInOutQuart: function (h, k, e, p, u) {
        return 1 > (k /= u / 2) ? p / 2 * k * k * k * k + e : -p / 2 * ((k -= 2) * k * k * k - 2) + e
    }
});
var sliderSpeed = 500, sliderInterval = 7E3, sliderTimer;

function slidePlease(h, k) {
    window.clearTimeout(sliderTimer);
    $("#slider .pickers .current").length && ($pick = $("#slider .pickers i").eq(k), $("#slider .pickers .current").removeClass(), mobile ? ($slider.find(".slide").show(), $slider.find(".slider.current").removeClass("current"), $slider.find(".filmstrip").stop().animate({"margin-left": $slider.outerWidth() * h * -1}, sliderSpeed, "easeOutQuart", function () {
        $pick.addClass("current");
        $slider.find(".filmstrip").css("margin-left", $("#slider .viewport").outerWidth() * ($("#slider .pickers .current").index() + 1) * -1);
        $slider.find(".slide").eq(h).addClass("current")
    })) : ($slider.find(".current").css({"z-index": 1}).removeClass("current").find(".first-line, .second-line").each(function () {
        $(this).stop().delay(50 * $(this).index()).animate({
            "margin-left": -500,
            opacity: 0
        }, 2 * sliderSpeed, function () {
            $(this).css({"margin-left": 0, opacity: 1})
        })
    }), $slider.find(".slide").stop().eq(h).each(function () {
        $(this).addClass("current").hide().css({"z-index": 2}).fadeIn(2 * sliderSpeed, function () {
            $pick.addClass("current");
            $(this).siblings().hide();
            sliderTimer = window.setTimeout(nextSlide, sliderInterval)
        });
        $(this).find(".first-line, .second-line").css({"margin-left": -500, opacity: 0}).each(function () {
            $(this).stop().delay(50 * $(this).index()).animate({"margin-left": 0, opacity: 1}, 2 * sliderSpeed)
        })
    }), $slider.find(".filmstrip").css({"margin-left": $slider.outerWidth() * h * -1})))
}

function prevSlide() {
    $("#slider .pickers .current").is(":first-child") ? slidePlease(0, $("#slider .pickers i").length - 1) : $("#slider .pickers .current").prev().trigger("click")
}

function nextSlide() {
    $("#slider .pickers .current").is(":last-child") ? slidePlease($("#slider .slide").length - 1, 0) : $("#slider .pickers .current").next().trigger("click")
}

var counterInterval = 11E3, counterTimer;

function changeCounter(h) {
    window.clearTimeout(counterTimer);
    counterTimer = window.setTimeout(function () {
        $("#main-counter .dashboard").trigger("click")
    }, counterInterval);
    $counter = $("#main-counter");
    $numbers = $counter.find(".numbers");
    $counter.find("p").animate({opacity: 0}, 500, function () {
        $(this).html('<span class="metrics">' + h.metrics + "</span> " + h.text).animate({opacity: 1}, 500)
    });
    var k = h.number.toString().split("");
    $numbers.find("span").stop().animate({top: 44}, 1E3);
    var e = $numbers.find("i").length - k.length;
    $counter.find(".dashboard").removeClass("animate fast");
    $counter.width($counter.width()).width("auto");
    $counter.find(".dashboard").addClass("animate fast");
    $numbers.find("i").addClass("animate").each(function (h) {
        h >= e ? (h = k[h - e], $(this).find("span").stop().hide().css("top", 0).fadeIn(250).animate({top: -44 * h}, 1E3, function () {
            $(this).parent().removeClass("animate");
            $counter.find(".dashboard").removeClass("animate fast");
            $counter.width($counter.width()).width("auto");
            $counter.find(".dashboard").addClass("animate")
        })) : $(this).find("span").stop().css("top", 0).fadeOut(250, function () {
            $(this).css("top", 44).show().parent().removeClass("animate")
        })
    })
}

var mobile = !1;
$(document).ready(function () {
    if (navigator.userAgent.match(/MSIE 8/i) || navigator.userAgent.match(/MSIE 7/i) || navigator.userAgent.match(/MSIE 6/i) || navigator.userAgent.match(/MSIE 5/i)) $("body").addClass("old-browser").prepend('<div id="youre-so-old-get-update"><span>\u0412\u0430\u0448</span> \u0431\u0440\u0430\u0443\u0437\u0435\u0440 \u0443\u0441\u0442\u0430\u0440\u0435\u043b. <div>\u0421\u043a\u0430\u0447\u0430\u0439\u0442\u0435 \u0430\u043a\u0442\u0443\u0430\u043b\u044c\u043d\u0443\u044e \u0432\u0435\u0440\u0441\u0438\u044e \u0438\u043b\u0438 \u0434\u0440\u0443\u0433\u043e\u0439 \u0431\u0440\u0430\u0443\u0437\u0435\u0440 <a href="http://www.google.ru/chrome/" target="_blank" class="chrome">Chrome</a> <a href="https://www.mozilla.org/ru/firefox/" target="_blank" class="firefox">Firefox</a> <a href="http://www.opera.com/ru/" target="_blank" class="opera">Opera</a> <a href="http://windows.microsoft.com/ru-ru/internet-explorer/download-ie" target="_blank">IE</a></div></div>'), $("#youre-so-old-get-update").slideDown(250);
    ("appearance" in document.body.style || "webkitAppearance" in document.body.style || "MozAppearance" in document.body.style) && $("html").addClass("appearance");
    $(".footer-nav ul").each(function () {
        $(this).find("li").eq(Math.ceil($(".footer-nav li").length / 2) - 1).nextAll("li").remove().prependTo($(this).next("ul"))
    });
    $(window).on("resize", function () {
        (mobile = 768 > $(window).width() ? !0 : !1) ? ($("#main .alert").prependTo("#middle .wrap"), $("#slider .slide").css("width", $("#slider").outerWidth()).show(), $("#slider .arrows span").css("height", $(".slide").first().find("img").height()), $(".side-nav").insertAfter(".breadcrumbs")) : ($("#slider .slide, #slider .arrows span").removeAttr("style"), $("#slider .slide.current").show(), $("#main .alert").prependTo("aside"), $(".side-nav").appendTo(".superdiv"), $(".main-nav ins ul").removeAttr("style"));
        $("#slider .slide").width($(document).width());
        $("#slider .filmstrip").css("margin-left", $("#slider .viewport").outerWidth() * ($("#slider .pickers .current").index() + 1) * -1);
        $("#middle .wrap").css("min-height", $(window).height() - $("header").outerHeight() - $("footer").outerHeight() - $(".art").outerHeight() - 18)
    }).on("load", function () {
        $(window).trigger("resize")
    });
    $(".main-nav li ul").parent().parent().mouseenter(function () {
        $(this).find("ul").outerWidth() + 24 > $(document).width() - $(this).offset().left ? $(this).addClass("right") : $(this).removeClass("right")
    });
    $("#slider").each(function () {
        $slider = $(this);
        $slider.swipe({
            swipeLeft: function () {
                nextSlide()
            }, swipeRight: function () {
                prevSlide()
            }
        }).find(".slide").swipe({
            tap: function () {
                if (ahref = $("#slider .slide").eq($("#slider .pickers .current").index() + 1).data("href")) document.location = ahref
            }
        }).each(function () {
            $slider.find(".pickers .wrap").append("<i/>")
        }).last().clone().prependTo($slider.find(".filmstrip"));
        $slider.find(".slide").eq(1).clone().appendTo($slider.find(".filmstrip"));
        $slider.find(".filmstrip").css({"margin-left": -1 * $("#slider .viewport").outerWidth()})
    }).on("click", ".pickers i", function () {
        slidePlease($(this).index() + 1, $(this).index())
    });
    $("#slider .pickers i").first().addClass("current").trigger("click");
    $(document).on("click", ".main-nav .toggler", function () {
        $("header").toggleClass("visible");
        $(window).scrollTop(0)
    });
    $(".main-nav > nav > ul > li, .additional-nav ul li").on({
        mouseenter: function () {
            $(this).find("ul").stop().slideDown(250);
            $(this).siblings().find("ul").stop().slideUp(250)
        }, mouseleave: function () {
            $(this).find("ul").stop().slideUp(250)
        }
    });
    $(".feedback-order").each(function () {
        if (384 < $(this).height()) $(this).addClass("collapsed").append('<div class="gradient"><a class="dashed">\u041e\u0437\u043d\u0430\u043a\u043e\u043c\u0438\u0442\u044c\u0441\u044f \u043f\u043e\u043b\u043d\u043e\u0441\u0442\u044c\u044e \u0441 \u043f\u043e\u0440\u044f\u0434\u043a\u043e\u043c \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u044f</a></div>').on("click", ".gradient a", function () {
            $(this).parent().fadeOut(250).parents(".feedback-order").removeClass("collapsed")
        })
    });
    $(".office-toggle, .tabs, .offices-tabs").each(function () {
        document.location.hash && $(this).find("a[href='" + document.location.hash.replace("-tab", "") + "']").addClass("selected").siblings().removeClass("selected")
    }).on("click", "a", function (e) {
        e.preventDefault();
        "main" == $("body").attr("id") || $(this).hasClass("selected") || (document.location.hash = $(this).attr("href") + "-tab");
        $(this).addClass("selected").siblings().removeClass("selected");
        $(this).parent().find("a").each(function () {
            $(this).hasClass("selected") ? $($(this).attr("href")).show() : $($(this).attr("href")).hide()
        })
    }).find(".selected").trigger("click");
    $(".qa").on("click", "h3 a", function () {
        $(this).parents(".qa").find(".answer").toggle()
    });
    $("section img[align='left'], section img[align='right']").each(function () {
        $(this).parent().is("a") ? $(this).parent().addClass("preview") : $(this).wrap("<span class='preview'/>");
        "right" == $(this).attr("align") && $(this).parent().addClass("right");
        $(this).removeAttr("align");
        void 0 != $(this).attr("alt") && 0 < $(this).attr("alt").length && $(this).parent().data("fancybox-title", $(this).attr("alt")).append(" " + $(this).attr("alt"))
    });
    if($("a[rel='fancybox']").length) {
        $("a[rel='fancybox']").fancybox();
    }
    if( $('a[rel="news-pic"]').length){
        $('a[rel="news-pic"]').fancybox();
    }

    $("section table").wrap("<div class='table-scroll'><div class='overflow'><div class='padding'></div></div></div>");
    $("#main-counter .dashboard").on("click", function () {
        $("#main-counter i.animate").length || (currentCounter = currentCounter == counterInfo.length - 1 ? 0 : currentCounter + 1, changeCounter(counterInfo[currentCounter]))
    });
    $("#main-counter").each(function () {
        var e = $(this).offset().top;
        if (e < $(window).height()) $("#main-counter").css("visibility", "visible").addClass("animate").find(".dashboard").trigger("click"); else $(window).on("scroll.counter", function () {
            e + 50 <= $(window).scrollTop() + $(window).height() && ($("#main-counter").css("visibility", "visible").addClass("animate").find(".dashboard").trigger("click"), $(window).off("scroll.counter"))
        })
    });
    $(".moscow-map .regions span").on({
        mouseenter: function () {
            $map = $(this).parents(".moscow-map").first();
            $map.find(".hover").removeClass("hover");
            $map.find(".placemarks i[data-district=" + $(this).attr("class").replace(" clicked", "") + "]").addClass("hover")
        }, click: function () {
            $select = $(this).parents(".tab").first().find(".select-district select");
            $select.val($select.find("option[data-name=" + $(this).attr("class").replace(" clicked", "") + "]").attr("value")).trigger("change");
            $(this).parents(".tab").first().find(".district-info").addClass("from-map")
        }
    });
    $(".moscow-map .placemarks i").on({
        mouseenter: function () {
            $map = $(this).parents(".moscow-map").first();
            $map.find(".hover").removeClass("hover");
            $map.find(".regions span." + $(this).data("district")).addClass("hover");
            $map.find(".placemarks i[data-district=" + $(this).data("district") + "]").addClass("hover")
        }, click: function () {
            $select = $(this).parents(".tab").first().find(".select-district select");
            $select.val($select.find("option[data-name=" + $(this).data("district") + "]").attr("value")).trigger("change");
            $(this).parents(".tab").first().find(".district-info").addClass("from-map")
        }
    });
    $(".moscow-map").on("mouseleave", function () {
        $(this).find(".hover").removeClass("hover")
    });
    $(".select-district select").on("change", function () {
        region = $(this).find("option[value=" + $(this).val() + "]").data("name");
        $(this).parents(".tab").first().find(".district-info").removeClass("from-map").find(".district").hide().filter("." + region).show();
        $(this).parents(".tab").first().find(".regions ." + region).addClass("clicked").siblings().removeClass("clicked");
        $(this).parents(".tab").first().find(".placemarks i").removeClass("clicked").filter("[data-district='" + region + "']").addClass("clicked")
    }).trigger("change");
    $("#offices-map .question a").on("click", function (e) {
        $(this).toggleClass("grey");
        $(this).hasClass("grey") ? $(this).parents(".tab").first().find(".moscow-map").hide().end().find(".disclaimer").hide().end().find(".answer").show() : $(this).parents(".tab").first().find(".moscow-map").show().end().find(".disclaimer").show().end().find(".answer").hide();
        e.preventDefault()
    });
    $("#offices-map .answer").on("click", function () {
        $(this).parents(".tab").first().find(".question a").trigger("click")
    });
    $(".info-tabs").on("click", "span", function (e) {
        $(this).parents(".district").first().find($(this).data("href")).show().siblings(".district-sub-info").hide();
        $(this).addClass("current").siblings().removeClass("current");
        e.preventDefault()
    }).each(function () {
        $(this).find("span").first().trigger("click")
    });
    $(".structure").on("click",".toggle",function(){

        $(this).toggleClass("expanded");

        console.log($(this).parents("article").siblings('.l-third').length)
        if($(this).parents(".l-second").first().find(".l-third").length){
            $(this).parents(".l-second").first().find(".l-third").slideToggle(250)
        }else if($(this).parents("article").siblings('.l-third').length){
            console.log($(this).parents("article").siblings('.l-third'))
            $(this).parents("article").siblings('.l-third').slideToggle(250);
        }


    });
    var h = [];
    $(".js--mvk-alth-item").each(function () {
        h.push($(this).data("letter").toString())
    });
    $(".js--mvk-alth-switcher").each(function () {
        var e = $(this).text().toString();
        -1 == $.inArray(e, h) ? $(this).addClass("is-hidden") : ""
    });
    $(".js--mvk-alth-switcher").on("click", function () {
        if ($(this).hasClass("is-hidden")) return !1;
        var e = $(this).text();
        window.location.hash = e;
        $(".js--mvk-alth-switcher").removeClass("is-active");
        $(this).addClass("is-active");
        $(".js--mvk-alth-item").removeClass("is-active").filter("[data-letter=" + e + "]").addClass("is-active")
    });
    var k = window.location.hash.replace("#", "");
    -1 != $.inArray(k, h) && $(".js--mvk-alth-switcher").each(function () {
        $(this).text() == k ? $(this).click() : ""
    })
});
var currentCounter = -1;